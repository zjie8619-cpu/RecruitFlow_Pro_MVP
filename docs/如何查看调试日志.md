# 如何查看Ultra引擎调试日志

## 📍 日志位置

Python的 `print()` 输出会显示在**运行Streamlit的终端/控制台**，**不是**浏览器控制台。

## 🔍 查看步骤

### 方法1：查看终端输出（推荐）

1. 找到启动Streamlit的终端窗口
   - 如果是在命令行启动的，就是那个窗口
   - 如果是在IDE中启动的，查看IDE的"终端"或"输出"面板

2. 在应用中执行批量匹配操作

3. 在终端中查看输出，应该看到类似这样的日志：
   ```
   [DEBUG] ai_match_resumes_df_ultra: 开始批量匹配，共2份简历
   [DEBUG] 简历1/2: 开始评分，文本长度=XXX
   [DEBUG] Ultra引擎.score() 开始: resume_length=XXX
   [DEBUG] S2: 开始动作识别，cleaned_text长度=XXX
   [DEBUG] S2: 动作识别完成，detected_actions数量=X
   [DEBUG] S3: 开始能力维度归类...
   ...
   [DEBUG] S9: 构建证据链完成，evidence_chain数量=X
   [DEBUG] 简历1/2: 评分完成，ai_review=True, highlight_tags=X, evidence_chains=X
   ```

### 方法2：使用日志文件

如果终端输出太多，可以将日志重定向到文件：

```bash
# Windows PowerShell
.venv\Scripts\python.exe -m streamlit run app/streamlit_app.py --server.port 8501 --server.headless true 2>&1 | Tee-Object -FilePath "ultra_debug.log"

# 然后查看日志文件
Get-Content ultra_debug.log -Tail 100
```

## 🐛 常见问题

### Q: 为什么浏览器控制台看不到Python日志？

A: 浏览器控制台只显示JavaScript的输出。Python的 `print()` 输出在运行Python的终端中。

### Q: 如何确认日志是否正常输出？

A: 在代码中添加一个简单的测试：
```python
print("=== 测试日志输出 ===")
```
如果终端中能看到这行，说明日志输出正常。

### Q: 日志太多怎么办？

A: 可以临时关闭部分日志，或者使用日志级别过滤。目前所有日志都是 `[DEBUG]` 级别。

## 📊 关键日志字段说明

- `detected_actions数量`: 检测到的动作数量（应该 > 0）
- `evidence_chain数量`: 证据链数量（应该 > 0）
- `ai_review存在`: AI评价是否生成（应该是 True）
- `highlight_tags数量`: 亮点标签数量（应该 >= 5）
- `evidence_chains`: 证据链字典的维度数量（应该是 4）

## 🔧 如果看不到日志

1. 确认应用使用的是最新代码（重启应用）
2. 确认终端窗口没有被最小化
3. 检查是否有编码问题（Windows GBK编码可能导致中文乱码）
4. 尝试在代码开头添加测试日志：
   ```python
   print("=== Ultra引擎已加载 ===")
   ```

